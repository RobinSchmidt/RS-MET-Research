\section{Elementary Combinatorics} 
% Maybe call it "enumerative combinatorics"

%\subsection{Selecting Elements from a Set} 
\subsection{Collections of Set Elements} 
Some of the most basic combinatorial concepts come from counting certain things that we can do with mathematical sets. Because sets are so ubiquitous and fundamental in mathematics, these concepts tend to pop up in many different fields of mathematics. There are a lot of things we can do with sets and ask how many different ways there are to do that thing. For any of these actions, we can also cook up arbitrary constraints which throw out certain possibilities to lower our count. Some of the actions with or without constraints are important enough to have their own names. Let's have look at some of them.

% Maybe rename to "Element Selections", "Choices", "Collections"

% Leupold, Vol. 2 pg 238 has a nice overview
% the table on pg 332 is also nice - reproduce it - but with formulas for the numbers

% Weitz pg 177 has also a nice introdcution

% Notation: the set has n elements and we choose k from it

% https://de.wikipedia.org/wiki/Abz%C3%A4hlende_Kombinatorik
% https://en.wikipedia.org/wiki/Enumerative_combinatorics
% "The problem of finding a closed formula is known as algebraic enumeration, and frequently involves deriving a recurrence relation or generating function and using this to arrive at the desired closed form"
% "a simple asymptotic approximation may be preferable" ...Stirlings approximations

% https://de.wikipedia.org/wiki/Abz%C3%A4hlende_Kombinatorik#Begriffsabgrenzungen
% has a translation table between the German and English terms and also other nice tables

% https://en.wikipedia.org/wiki/Permutation#Other_uses_of_the_term_permutation

% The terminology seems a mess

\paragraph{Permutations and Factorials}
Let's say that we have $n$ different (i.e. distinguishable) objects and we want to know, how many ways there are, to put these objects into a different order. For example, the possible orders for the $3$ objects $a,b,c$ are $abc$, $acb$, $bac$, $bca$, $cab$, $cba$. These are $6$ different orders. We call these different orderings of a number of $n$ different objects \emph{permutations}. The term "permute" means something like "reorder" where identity (i.e. do-nothing) reordering also counts as trivial edge case (as is typical in math). The number of permutations of $n$ distinguishable objects is given by \emph{factorial} of $n$:
\begin{equation}
P_n = 1 \cdot 2 \cdot 3 \cdot \ldots \cdot n = n!
\end{equation}
This is easy to understand when we recognize that there are exactly $n$ different ways to choose an element for the first position because we have $n$ elements to choose from. Then, after the first element has been chosen, we have left $n-1$ elements to choose for the second position, then $n-2$ for the third and so on. We get $n\cdot(n-1)\cdot(n-2)\cdot\ldots\cdot1$ ways all in all. It is easy to see that the factorial function obeys the simple recursion formula:
\begin{equation}
n! = n \cdot (n-1)!
\end{equation}

\medskip
I stressed the point that the objects need to be distinguishable. This is the usual case when the objects are elements of a mathematical \emph{set} because set elements are by definition distinguishable. There is a more general notion of a \emph{multiset} in which there may be indistinguishable objects. If the $n$ objects are not all distinguishable such that they fall into $k$ equivalence classes of sizes $m_1, m_2, \ldots, m_k$ with $m_1 + m_2 + \ldots + m_k = n$, then there are:
\begin{equation}
P_n^{(m_1,m_2,\ldots,m_k)} 
= \frac{n!}{m_1! m_2! \ldots m_k!} 
= \binom{n}{m_1,m_2,\ldots, m_k}
\end{equation}
distinguishable permutations. These ares sometimes called \emph{multiset permutations} or \emph{permutations with repetition} [VERIFY!]. The numbers $m_i$ are called the \emph{multiplicities}. The quantity is also called the multinomial coefficient and it is a generalization of the binomial coefficient "$n$-choose-$k$" and the notation on the right hand side is a corresponding generalization of the usual binomial coefficient notation $\binom{n}{k}$. ...TBC... mention asymptotic approximations such as Stirling's formula and continuous variants as the product function(or its shifted version, the Gamma-function, point out relation to expanding an expression like $(\sum_{i=1}^{n} x_i)^p$ - here $n$ is the number of variables and $p$ is the power/exponent)


% Leupold, pg 329
% https://en.wikipedia.org/wiki/Permutation#Permutations_of_multisets
% https://en.wikipedia.org/wiki/Multinomial_theorem#Multinomial_coefficients

% Nice example:
% https://www.tutorchase.com/notes/cie-a-level/maths/4-2-2-arrangements-with-repetition

% %\pageref{Sec:FactorialsAndBinomCoeffs}

\paragraph{Combinations and Binomial Coefficients}
Imagine we have a set of size $n$ and we are asked how many different subsets of size $k$ we can form from this set. That is: how many different ways are there to choose $k$ elements from a set of $n$ elements. It doesn't matter in which order we chose the elements - as long as the total set of chosen elements is the same, our created subset is considered to be the same (remember that in sets, order doesn't matter - it isn't even a thing\footnote{Unless you \emph{define} an order relation \emph{on top} of the set - but a set all by itself does not have a notion of order built into it.}). We call these different subsets of size $k$ of a given set of size $n$ \emph{combinations} or, more specifically, $k$-combinations. The number of possible $k$-combinations from a set of size $n$ is given by the \emph{binomial coefficient}:
\begin{equation}
C_n^k = \binom{n}{k} 
      = \frac{n!}{k! (n-k)!} 
      = \frac{n \cdot (n-1) \cdot (n-2) \cdot \ldots \cdot (n-k+1)}{k!}
      = \frac{\prod_{m=n-k+1}^{n} m}{k!}
\end{equation}
which is, for this reason, typically pronounced as "$n$-choose-$k$". The formula above in terms of factorials is not the only way to compute binomial coefficents. A nice way to compute them is via \emph{Pascal's triangle} which looks like this:
\begin{center}  % doesn't work!
\begin{verbatim}
                    1
                 1     1
              1     2     1
           1     3     3    1
       1      4     6     4    1
    1      5    10    10     5   1
 1     6     15    20    15    6   1
\end{verbatim}
\end{center}
One starts with writing down the two outer edges consisting of all ones. Then, to fill a row, one  just forms the sums of the two numbers north-west and north-east of the current position. For example, the two 10s in the 6th row are formed as $4+6$ and $6+4$ from the entries in the 5th row.
ToDo: give recursion formula that can be interpreted in terms of Pascal's triangle. Maybe give more recursion formulas

\medskip
In some situations, we may be allowed to choose an element more than once such that we do not form a (sub)set anymore but instead a multiset with elements picked from a given set. For the number different possible such combinations with repetition we get:
\begin{equation}
\prescript{r}{}{C}_n^k
= \binom{n+k-1}{k}
= \frac{n+k-1}{(n-1)! k!}
= \left(\!\!{n\choose k}\!\!\right)
\end{equation}
where the top-left superscript $r$ stands for "with repetition"and the right notation that looks like binomial coefficient notation with double parentheses is sometimes used for this. This number is sometimes pronounced as "$n$-multichoose-$k$". VERIFY...TBC...

% https://en.wikipedia.org/wiki/Combination#Number_of_combinations_with_repetition
% notation with double parentheses, "n-multichoose-k"

% https://tex.stackexchange.com/questions/5816/multiset-notation-in-latex
% https://en.wikipedia.org/wiki/Combination

% https://de.wikipedia.org/wiki/Binomialkoeffizient#Verallgemeinerung

% https://mathworld.wolfram.com/Multichoose.html

\paragraph{Variations and Falling Factorials}
%The number of \emph{variations} of $n$ distinguishable objects is given by:
Now we consider a situation where we have a given set of size $n$ and the task is to choose $k$ objects from it and put them into a given order. How many ways are there to do this? That is, how many different $k$-tuples can be formed from elements of a set of size $n$? If we allow an object to be chosen more than once, these tuples are is called \emph{variations with repetition} or \emph{arrangements with repetition} and there are:
\begin{equation}
\prescript{r}{}{V}_n^k = n^k
\end{equation}
of them. Again, the $r$ stands for "with repetition". In this setup, the number $k$ can even be greater than $n$. In such a case, obviously, there \emph{must} be repetitions. We could, for example, ask how many different strings of length $7$ could be formed from the $3$ letters $a,b,c$. The answer is $3^7 = 2187$. If repetitions are not allowed, we call it \emph{variations/arrangements without repetition} and there are:
\begin{equation}
V_n^k = \frac{n!}{(n-k)!} 
      = n \cdot (n-1) \cdot (n-2) \cdot \ldots \cdot (n-k+1) 
      = \prod_{m=n-k+1}^{n} m
\end{equation}
of them. These numbers $V_n^k$ are also known as \emph{falling factorials} and sometimes denoted as $n^{\underline{k}}$. In this notation, the special case  $n^{\underline{n}}$ reduces to the regular factorial: $n^{\underline{n}} = n!$. ...VERIFY! ...TBC...

% I think, these "falling factorials" are also called "falling powers" in discrete calculus
% It seems that in combinatorics, "falling factorial" is more common whereas in discrete cals, 
% falling power is more common. The reason may be that in combinatorics, factorials are the more important thing and in discrete calc, they play the same role as the prdinary powers in ordinary calc.

% https://claude.ai/chat/ec2263ec-f8fc-4f02-b13b-69790e741ee2

% https://www.statisticshowto.com/falling-power-definition/

% https://en.wikipedia.org/wiki/Permutation#Other_uses_of_the_term_permutation
% k-permutation of n, partial permutation, sequence without repetition, variation, or arrangement

% https://en.wikipedia.org/wiki/Falling_and_rising_factorials

% https://de.wikipedia.org/wiki/Variation_(Kombinatorik)

% https://www.tutorchase.com/notes/cie-a-level/maths/4-2-2-arrangements-with-repetition
% 
% https://stackoverflow.com/questions/2366074/code-for-variations-with-repetition-combinatorics

\paragraph{Partitions and Bell Numbers}
\label{Sec:PartitionsOfSets}
A \emph{partition} of a set $S$ is a way of splitting it into disjoint, non-empty subsets whose union gives back the original set. For example, take the set $\{a,b,c\}$. We can partition it in the following 5 ways: $\{\{a\},\{b\},\{c\}\}, \{\{a\},\{b,c\}\}, \{\{b\},\{a,c\}\}, \{\{c\},\{a,b\}\}, \{\{a,b,c\}\}$. For a set with $n$ elements, the number of possible partitions is given by the $n$th \emph{Bell number} $B_n$. Partitions of a set can also be interpreted in terms of equivalence classes. That is: We can consider each of the subsets as being an equivalence class [VERIFY!]. Therefore, the number $B_n$ gives the number of possible different equivalence relations on a set of size $n$. The first $7$ Bell numbers are: $B_0=1, B_1=1, B_2=2, B_3=5, B_4=15, B_5=52, B_6=203$. The Bell numbers can be computed algorithmically in a similar way as the binomial coefficients can be computed via Pascal's triangle. For the Bell numbers, there's \emph{Bell's triangle}. It looks as follows:
\begin{center}  % doesn't work!
\begin{verbatim}
                    1
                 1     2
              2     3     5
           5     7    10    15
       15    20    27    37    52
    52    67    87   114   151   203
203   255   322   409   523   674   877
\end{verbatim}
\end{center}
The rules to compute the numbers are as follows: Start with the single $1$ in the first row. To start the next row, copy the last number from the previous row into the first position of the next row. All other numbers in the row are computed by adding the left and top-left neighbors until the row is completely filled. Then copy the last number of the row into the first position of the next row again. And so on. The sequence of Bell numbers appears in the leftmost column, i.e. in the row start numbers. They also appear in the row end numbers but index-shifted by one with $B_0$ missing. This is obvious from the fact that in the algorithm, we always copy the last number of one row into the first position of the next row.

...TBC... Q: Do the inner numbers of the Bell triangle have some meaning, too? ToDo: mention integer partitions (and warn about confusing these concepts - they have nothing to with one another, I think).

% https://en.wikipedia.org/wiki/Partition_of_a_set
% https://en.wikipedia.org/wiki/Bell_number
% https://en.wikipedia.org/wiki/Bell_triangle  - similar to Pascal's triangle
% https://en.wikipedia.org/wiki/Partition_of_a_set#Counting_partitions
% ...non-crossing partitions / Catalan numbers
% Stirling numbers

% Not to be confused with:
% https://en.wikipedia.org/wiki/Partition_problem
% https://en.wikipedia.org/wiki/Integer_partition
% https://en.wikipedia.org/wiki/Partition_function_(number_theory)
% https://projecteuclid.org/journals/rocky-mountain-journal-of-mathematics/volume-34/issue-2/Recurrences-for-the-Partition-Function-and-Its-Relatives/10.1216/rmjm/1181069871.full?tab=ArticleFirstPage



% The Subfactorial is Hilarious
% https://www.youtube.com/watch?v=LCKMZCtwNI4
% -"Derangement" - a permutation where no element gets mapped to itself.
% -The notation !n denotes the number of possible derangements of n objects
% -https://en.wikipedia.org/wiki/Derangement
% -https://mathworld.wolfram.com/Subfactorial.html
% -The channel seems to have some more videos on combinatorial topics:
%  https://www.youtube.com/@WrathofMath/videos

% What about the double factorial?


\paragraph{Derangements and Subfactorials}
The factorial of $n$ gives the number of ways, we can order $n$ items. What if we assume that our $n$ items have some natural order like $1,2,3,\ldots,n$ and we now ask how many ways there are to reorder them such that none of the items is in its original position. Such a messed up ordering is called a \emph{derangement} and the number of possible derangements of $n$ items is given by the subfactorial function. It is denoted by $!n$ and can be computed from the normal factorial via the formulas: 
\begin{equation}
!n = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!} 
   = n! - \sum_{k=1}^{n} \binom{n}{k} \cdot !(n-k)
   = \floor*{ \frac{n! + 1}{\e} }
   = round(n! / e)
\end{equation}
It also obeys the following recursion relations:
\begin{equation}
!n = (n-1) \cdot (!(n-1) + !(n-2))
   = n \cdot (!(n-1)) + (-1)^n
\end{equation}
Some of the formulas do only hold for $n > 0$ and some only for $n > 1$, so take care\footnote{You may look the stuff up on Wikipedia for more details} about some special rules for the initial values when using the formulas. The initial values of the sequence are: $1,0,1,2,9,44,265,\ldots$. Since we are now looking at permutations but with an additional constraint to what kind of permutation we consider valid, it is clear that the number of ways to achieve that must be less than without the constraint. So, we conclude that the number must be lower than the factorial. Maybe that's the motivation for calling it subfactorial. This is my own speculation. Of course, using other constraints would also lower the number but that particular one seems to have some importance. When looking at the graphs of the factorial and the subfactorial, they look very similar with regard to their growth behavior. With a log-scaled $y$-axis (and linear $x$-axis), they look parallel and the subfactorial is, of course, always below the factorial. ...TBC...ToDo: verify the formulas numerically!


%https://mathworld.wolfram.com/Subfactorial.html
%https://en.wikipedia.org/wiki/Derangement
%https://de.wikipedia.org/wiki/Subfakult%C3%A4t
%-Number of permutations in which none of the items is in its original place

% https://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle#Counting_derangements


% https://en.wikipedia.org/wiki/Alternating_permutation
% https://de.wikipedia.org/wiki/Euler-Zahlen

\subsection{Trees and Graphs}
Aside from counting ways how to do certain things with sets, combinatorics is also used to count things that have to do with \emph{trees} or more general \emph{networks} of nodes (also known as \emph{graphs}, although that may be confused with the notion of function graphs). These ideas come up frequently in certain more specialized fields of mathematics such as graph theory and and in scientific and engineering fields like computer science.

%\footnote{Here, we refer to a grah in the sense of graph}
%Another important area of combinatorics


\paragraph{Parenthesations and Catalan Numbers}
Consider the task of computing a product of 4 numbers $p = a \cdot b \cdot c  \cdot d = abcd$. Now we ask how many ways there are to evaluate this product assuming that in each step, we compute a product of two numbers. That is: we ask how many ways are there to set the parentheses. The answer is 5. These are the 5 ways to compute the product: $((ab)c)d, (a(bc))d, (ab)(cd), a((bc)d), a(b(cd))$. In general, the number of ways to evaluate/parenthesize a product of $n$ factors is given by the $n$th Catalan number. The Catalan number pop up in various other settings as well  ...TBC...

% Is there some sort of recursion relation that allows efficient computation?

% ToDo: explain where the parethisation of an expression may matter - for example in evaluating a matrix a product, it may make a (big) difference in terms of computational cost. Give an example where it matters a lot. Maybe a scalar prodcut of the form x^T A y where A = a b^T such that we have x^T a b^T y. Evaluating it like (x^T (a b^T)) y would be vastly more inefficient than x^T (a b^T) y, I think. I assume that x,y,a,b are column vectors. ...or maybe try to create an example with just 3 factors

%Parenthisations?, Parenthesisations?


%The number of different way

% ((ab)c)d     (a(bc))d     (ab)(cd)     a((bc)d)     a(b(cd))



% https://www.johndcook.com/blog/2013/10/03/parenthesize-expression-catalan/
% https://en.wikipedia.org/wiki/Catalan_number
% https://de.wikipedia.org/wiki/Catalan-Zahl

% What are Catalan Numbers?
% https://www.youtube.com/watch?v=vS1Ye2ArjNY
% -they also give the numbers of way to triangulate an n-sided polygon

% Catalan Numbers - Numberphile
% https://www.youtube.com/watch?v=fczN0BCx0xs

% The Most Important Sequence: The Catalan Numbers
% https://www.youtube.com/watch?v=TAuJV5eNKLM

% Walking city streets: Catalan Closed Form (visual proof from lattice paths)
% https://www.youtube.com/watch?v=kaInaIUABzY

% Counting with Calculus: The Magic of Generating Functions
% https://www.youtube.com/watch?v=dLiT9axMDrg

% Catalan numbers derived!
% https://www.youtube.com/watch?v=PBt1gB9Ou9E

% My favorite Sequence of Numbers
% https://www.youtube.com/watch?v=X6NQMB6JaF0


%\paragraph{Super-Catalan Numbers}
%https://en.wikipedia.org/wiki/Catalan_number#Generalizations


%\paragraph{Hyper-Catalan Numbers}

% https://www.tandfonline.com/doi/full/10.1080/00029890.2025.2460966#d1e755
% A Hyper-Catalan Series Solution to Polynomial Equations, and the Geode

% https://arxiv.org/pdf/2102.05121
% GENERALIZED CATALAN NUMBERS FROM HYPERGRAPHS



%\subsection{Counting in Geometry}

%\paragraph{Tiling a Rectangle} 

% https://en.wikipedia.org/wiki/Fibonacci_sequence#Combinatorial_identities
%https://math.stackexchange.com/questions/4242678/relation-between-fibonacci-numbers-and-combinations-counting
% https://math.stackexchange.com/questions/81805/how-to-show-that-this-binomial-sum-satisfies-the-fibonacci-relation

% Maybe this should be explained in terms of dividing a line. The 2nd dimensions seems irrelevant. I think, we ask for the number of different ways to divide a line of length n into pieces each of which is and integer. The pieces should have a length of at least 1 and at most n-1.
% ah - no - i think, the length is at most 2 - the discussion says: "squares and dominos"

% But there's another geometric interpretaion in terms of the side lengths of the squares in a "Fibonacci rectangle" or Fibonacci spiral - but that has nothing to do with counting

%\paragraph{Dividing a Circle by Secant Lines}

%https://en.wikipedia.org/wiki/Dividing_a_circle_into_areas
%https://oeis.org/A000127

\begin{comment}


https://en.wikipedia.org/wiki/Central_binomial_coefficient
https://en.wikipedia.org/wiki/Catalan_number#Applications_in_combinatorics
https://en.wikipedia.org/wiki/Stirling_number
https://en.wikipedia.org/wiki/Stirling_numbers_of_the_first_kind
https://en.wikipedia.org/wiki/Gaussian_binomial_coefficient#Combinatorial_descriptions


https://en.wikipedia.org/wiki/Double_factorial
https://mathworld.wolfram.com/DoubleFactorial.html
https://mathworld.wolfram.com/Multifactorial.html


Counting in Geometry:






About an unintuitive concept that explains unsolvable Puzzles
https://www.youtube.com/watch?v=p6kCYbKIMak
-Is about parity - not sure if that fits in Combinatorics or elsewhere


https://en.wikipedia.org/wiki/Twelvefold_way
https://en.wikipedia.org/wiki/Twelvefold_way#Formulas

https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)



https://mathworld.wolfram.com/FigurateNumber.html

Lah Numbers and an appearance of exponential generating functions
https://www.youtube.com/watch?v=k9Vdgj8Aps8
-Lah numbers: L(n,k): Number of ways to partition the set {1,2,3,...,n} into k *ordered* subsets


12 Different Factorials You Have NEVER Heard Of
https://www.youtube.com/watch?v=rryZoThy-Z8

How many types of factorials are there?
https://www.youtube.com/watch?v=ieT7VN2eJVg

Stirling Numbers - The Magic Duo
https://www.youtube.com/watch?v=Fi90nwCcBVA
-Gives algorithms to compute the striling numbers efficiently
-Gives combinatorial interpretations of these numbers

\end{comment}

