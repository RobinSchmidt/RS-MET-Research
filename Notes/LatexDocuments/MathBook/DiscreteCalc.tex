\chapter{Discrete Calculus}
[This is all very preliminary] Calculus, in the most commonly used sense of the word, refers to the field of mathematics that deals with derivatives, integrals, differential equations, sequences and series expansions. In a broader sense \emph{a} calculus is a system of rules for doing calculations. The so called \emph{discrete calculus} also known as \emph{calculus of finite differences} is a calculus that is analogous to the usual differential and integral calculus, just that we do not go the limiting step where some quantity (like a $\Delta x$ or $h$, say) approaches zero. Instead, our $h$ remains a fixed finite (i.e. non-infinitesimal) value that is chosen upfront - usually taken to be $1$. It turns out that you can always reformulate the problem into a form where $h = 1$ such it doesn't really matter which value you choose, and choosing $1$ turns out to be most convenient. Continuous calculus is concerned with functions from the reals to the reals, i.e. functions of the type $f: \mathbb{R} \rightarrow \mathbb{R}$. In discrete calculus, we look at functions from the integers into the reals, i.e. functions of the type $f: \mathbb{Z} \rightarrow \mathbb{R}$. In the section about sequences, we defined them as functions $f: \mathbb{N} \rightarrow \mathbb{R}$ but the idea can readily be generalized to allow $\mathbb{Z}$ as the domain. With that generalization, we may also view the discrete calculus as the calculus of sequences. ...TBC...

% also konwn as "calculus of finite differences"

% To indicate that the input to our functions are integers, we'll use the notation f(n) rather than f(x) here. Some authors use $x$ regardless but I prefer $n$ because its also very common in signal processing (which is my home turf)

% Maybe use brackets like f[n] instead of f(n). Or maybe use sequence notation f_n

% Examples: lambda calculus, residue (? ...other calculi?)


\section{Difference Calculus}
Difference calculus is the part of discrete calculus that is analogous to the usual differential calculus. ...TBC...

%ToDo: define forward and backward difference, mention connection to numerical approximation of derivatives (maybe mention the central difference although it plays no big role in difference calculus)

\subsection{Difference Operators}  ...TBC...


\subsubsection{Forward Difference}

% Introduce \Delta_h f(n) = f(n+h) - f(n)


\subsubsection{Backward Difference}
% Point out that in DSP, the formward difference would count as a noncausal operation and therefore can't be implemented in realtime (except when accepting a latency of 1 sample)

%\subsubsection{Central Difference}
% Mostly useful for approximating derivatives by finite differences. But that is not the point of difference calculus, so the central difference usually plays no role here.


% Maybe call the subsection "Difference Operators" and give some alternatives:
% backward difference, central difference, differences with arbitrary stepsize h,

%\paragraph{}


\subsubsection{Differencing some Functions} ...TBC...

\paragraph{Powers}
Having defined our difference operator, let's investigate what it does to power functions $f(n) = n^p$ ...TBC...


\paragraph{Falling Powers}
As we have seen, the differences of power functions are a bit messy. Not so nicely clean as the derivatives are. However, there is another type of function that does indeed behave nicely under the differencing operator. I'm talking about the so called \emph{falling powers}. They are denoted by $n^{\underline{m}}$ ...TBC...



% In combinatorics, they are also called falling factorials. 

% Give alternative notations. Mention rising powers (Pochhammer symbol)

\paragraph{Exponential Functions}
Let's now look at the differences of exponential functions of the form $f(n) = a^n$. The general rule is: $\Delta a^n = (a-1) a^n$. For the special case of $a=2$, we get $\Delta 2^n = (2-1) \cdot 2^n = 2^n$. We see that the difference of the function $2^n$ is itself. That's analogous to how $\e^x$ is its own derivative in ordinary calculus.

% Give general rule \Delta a^n = (a-1) a^n. With a=2, we get Delta 2^n = (2-1) 2^n = 2^n. The number 2 plays the same role as the number \e in continuous calculus


% ToDo: power rule, falling powers, rule for exponential functions






\subsubsection{Differencing Rules}  

%...TBC...ToDo: power rule, rule for exponential functions, product rule, ...

% https://en.wikipedia.org/wiki/Discrete_calculus#Calculus_of_differences_and_sums

\paragraph{Linearity}

\paragraph{Product Rule}
\begin{equation}
 \Delta (f g) = f \cdot \Delta g + g \cdot \Delta f + \Delta f \cdot \Delta g
\end{equation}
% I think, there are other ways to write it down like 
% D (f g) = f(n) * D g(n) + f(n+1) * D g(n)
%         = g(n) * D f(n) + g(n+1) * D f(n)
% but they are less symmetric

% This video has a nice derivation
% https://www.youtube.com/watch?v=Cmfbpo0D0uk
% I think, when we use a difference of h, the last term  \Delta f \cdot \Delta g  would have to be
% multiplied by h


\paragraph{Quotient Rule}
% See Hamming book

% What about a chain rule?


\section{Summation Calculus}
Summation calculus is the part of discrete calculus that is analogous to the usual integral calculus. ...TBC...

\subsection{Fundamental Theorem}
Given two functions $F$ and $f$ from $\mathbb{Z}$ to $\mathbb{R}$ such that $f(n) = \Delta F(n)$, the following holds:
\begin{equation}
 \sum_{n=a}^{b-1} f(n) = F(b) - F(a)
\end{equation}
% Point out relation to Riemann sum. This is well explained here:
% https://www.youtube.com/watch?v=Cmfbpo0D0uk
% which also makes clear where the ugly b-1 comes from. explain the b-1. Maybe when we would use the
% backward difference, it would disappear?

% Maybe also derive the formula from the definition of the differencing operator. This involves recognizing that the sum is telescopic

%\section{Function Approximation}
% -develop the Newton-Gregory formula as analogon for Taylor series




\subsection{Summation Rules}

\paragraph{Summation by Parts}

\begin{equation}
\sum_{n=a}^{b} f(n) \Delta g(n) 
=
f(b) g(b+1) - f(a) g(a) - \sum_{n=a}^{b-1} g(n+1) \Delta f(n)
\end{equation}
VERIFY!
% Formula is from
% https://www.youtube.com/watch?v=FNh-Xkfnu1M    at 30:20
% But on wikipedia, the formula looks different:
% https://en.wikipedia.org/wiki/Summation_by_parts
% and actually nicer. Maybe they are equivalent? On wikipedia, we have f(b+1) g(b+1) form the 1st
% term and the sum in the last term runs up to b (rather than b-1)
% Maybe check both formulas numerically

% is there a substitution rule?








\section{Difference Equations}
The calculus of difference equations is the part of discrete calculus that is analogous to the calculus of differential equations. Difference equations are also known as recurrence relations and they can also be ssen as a particular type of functional equations. ...TBC...

% See: Numerical Methods for Scientists and Engineers (Hamming)

\subsection{The Z-Transform}
An important tool for solving linear differential equations in continuous calculus is the Laplace transform. The analogon in discrete calculus is the $Z$-transform.

% Point out anaolgy to the Laplace transform



% Generating Functions , the Z-Transform

% https://en.wikipedia.org/wiki/Generating_function
% -Looks like the ordinary generating function is the z-trafo for sequences that are zero
%  for n < 0. ...adn the z-trafo usually assumes a complex argument
% -Exponential generating functions can transform recurrence relations into ODEs.

\subsection{Generating Functions}




\section{Bridges to Continuous Calculus}


\subsection{Stirling Numbers}

% https://en.wikipedia.org/wiki/Falling_and_rising_factorials#Connection_coefficients_and_identities

% Numbers to be used as coefficients to translate between normal powers and falling powers

\subsection{The Bilinear Transform}

% Introduce bilinear transform

\subsection{Umbral Calculus}

% The Shadowy World of Umbral Calculus
% https://www.youtube.com/watch?v=D0EUFP7-P1M

% The Strange Case of the Umbral Calculus
% https://www.youtube.com/watch?v=ytZkmV-7EbM









\section{Applications}
% Maybe rename to Applications

\subsection{Solving Nasty Sums}

\subsection{Solving Difference Equations}


%\paragraph{Evaluating Sums at Non-Integers}
\subsection{Interpolation of Sums}
Suppose we are given a function $f(x)$ and suppose that for some order $m$, the difference $\Delta^m$ of $f$ vanishes for large values of $x$ such that $\lim_{x \rightarrow \infty} \Delta^m f(x) = 0$. We want to evaluate the sum $S(x)$ defined via $S(x) = \sum_{k=1}^{x} f(k)$. We have suggestively used $x$ as variable name to indicate that we want to evaluate the sum at non integers. But the $x$ occurs as upper summation limit so we can use the defining formula for evaluating $S$ only for integer $x$. The following formula provides a nice, smooth and "natural" interpolation for $S(x)$ for non-integer values of $x$:
\begin{equation}
S(x) = \lim_{n \rightarrow \infty} 
\left(   \sum_{k=1}^{n-1} \left(f(k) - f(x+k) \right) 
       + \sum_{k=1}^{m} \binom{x}{k} \Delta^{k-1} f(n)  \right)
\end{equation}
where
\begin{equation}
\binom{x}{k} = \frac{x (x-1) (x-2) \ldots (x-(k-1)) }{k!}
\end{equation}
...TBC...Explain where the formula comes from, give some examples. Cite the video that derives the formula

% Maybe move the definition of binomial coeffs for real x into the early section about binomial coeffs. Maybe also give a generalization for (n,k) where k is real and n is still integer. Finally, give one where both are real. Maybe it can use the product function \Pi(x) that reduces to the factorial when x is natural. Then use the formula that defines binomial coeffs in terms of the product function. Like binom(x,y) = prod(x) * prod(x-y) / prod(y). Maybe express it in terms of the logarithms: log(binom(x,y)) = log(prod(x)) + log(prod(x-y)) - log(prod(y)) to tame the intermediate numbers to avoid overflow in numeric computations


% Q: Does it also work when we define $S(x) = \sum_{k=0}^{x} f(k)$? It seems more natural to me to let start k at 0 rather than 1.

% Q: Can the formula be applied to interpolate functions that are not defined via sums? Looks like we could just write an arbitrary function as sum of its first difference and then apply the formula to that. That means, for any given function S(x), just set f(x) = \Delta S(x) and then apply the above formula. That just increases the power of the Delta in the formula by 1: f becomes \Delta S, and $\Delta^{k-1} f$ becomes $\Delta^{k} S$

% ToDo: implement it numerically

% How to Extend the Sum of Any* Function
% https://www.youtube.com/watch?v=hkn9zeRuzHs
% -Final formula appears at 34:50, Definition of S(x) at around 4:00
% -Code for the animations:
%  https://github.com/LinesThatConnect/How-to-Extend-the-Sum-of-Any-Function

% How to Add a Noninteger Number of Terms: From Axioms to New Identities (Müller, Schleicher)
% https://arxiv.org/abs/1001.4695

% How to add a non-integer number of terms, and how to produce unusual infinite summations
% https://www.sciencedirect.com/science/article/pii/S0377042704003851

% Fractional sums and Euler-like identities
% https://link.springer.com/article/10.1007/s11139-009-9214-9


% Applications:
% - Solving nasty sums
% - Solve difference equations


% Finite Calculus: A Tutorial for Solving Nasty Sums
% https://www.cs.purdue.edu/homes/dgleich/publications/Gleich%202005%20-%20finite%20calculus.pdf
% -Nice tutorial on discrete calculus
% -Motivates/derives falling powers - why they do work so nicely with the discrete derivative
% -has Stirlings's triangle






\begin{comment}

Questions:

- Is there a fundamental theorem of discrete calculus like
  sum_{k=a}^b \Delta f(x) = f(b) - f(a)
  
  ah yes - it is:
  
  sum_{n=a}^b g(x) = G(b+1) - G(a)  
  See:
  Discrete Calculus: My favorite topic for a student seminar talk!
  https://www.youtube.com/watch?v=FNh-Xkfnu1M   at 20:22
  It's a very good general intro into discrete calc.
  
  Maybe its looks nice like this:   sum_{n=a}^{b-1} f(x) = F(b) - F(a)  
  
  
 
- What about "indefinite" sums in analogy to indefinite integrals, i.e. sums without a given
  index range?
  


Differenzenrechnung: Vom Kalkül der diskreten Analysis
https://www.youtube.com/watch?v=1-Q7Z-F4KVs

Another World Similar to Calculus | Discrete Calculus
https://www.youtube.com/watch?v=mVjBSWHlTnY  by Zundamon's theorem

Why don't they teach Newton's calculus of 'What comes next?'
https://www.youtube.com/watch?v=4AuV93LOPcE   by Mathologer
-Newton Gregory formula (analogon to Taylor fomrula?)

A Fundamental Theorem of Calculus for Series!!
https://www.youtube.com/watch?v=Al_SbvdHTR4   by Micheal Penn

Discrete Calculus: My favorite topic for a student seminar talk!
https://www.youtube.com/watch?v=FNh-Xkfnu1M   by Micheal Penn


Discrete Calculus - The Calculus of Finite Differences
https://www.youtube.com/watch?v=0YRg2utZEoQ   by dr3213
-Good overview

Intro to Discrete Calculus
https://www.youtube.com/watch?v=Cmfbpo0D0uk   by Davis Deaton

Intro to Linear Recurrence Relations
https://www.youtube.com/watch?v=GB4R76HES_0



Maybe introduce a shift operator  S_k: S_k f(n) = f(n-k)  or  f(n+k). This may be useful when
combining it with \Delta to wqrite sown some formluas without the somewhat sloppy notation of
using things like f(n+1)^. ...not sure, though

\end{comment}