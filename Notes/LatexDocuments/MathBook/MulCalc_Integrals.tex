\section{Integration}

\subsection{Double Integrals}
Double integrals are 2D integrals of functions $f: \mathbb{R}^2 \rightarrow \mathbb{R}$ with $f = f(x,y)$. We can visualize the graph of such a function as a terrain above the $xy$-plane where the $z$-coordinate is the height above the plane and is prescribed by $f$ as function of $x$ and $y$. Just like we could interpret integrals of 1D functions as areas between the $x$-axis and the function graph, we can imagine 2D integrals as the volume between the $xy$-plane and the function graph, i.e. the surface of the terrain. In a definite integral in 1D, the domain of integration was just a simple interval on the $x$-axis. Here in 2D, the domain of integration can be in general an arbitrarily shaped region in the $xy$-plane. The simplest case is when that region is an axis-parallel rectangle. In this case, we have an interval $[a,b]$ of $x$-values and another interval $[c,d]$ of $y$-values and we can define the 2D integral in full analogy to the definition of the 1D Riemann integral in \ref{Eq:RiemannIntegral1D} as a limit of a double sum:
\begin{equation}
 I =  \int_c^d \int_a^b f(x,y) \, dx dy = \lim_{n \rightarrow \infty} \sum_{j=1}^n \sum_{i=1}^n f(x_i, y_j) \, \Delta x_i \Delta y_j
\end{equation}
Again, this is a somewhat simplified definition. For the actual definition, all considerations mentioned in the 1D case apply and in addition, we do not actually need to require the two sums to have the same upper limit. The inner $i$-sum could go up to $n$ and the outer $j$-sum could go up to some $m \neq n$ and then we would take the limit in which both $m$ and $n$ go to infinity. But for an idea of what's going on, this definition is good enough. Let's unpack a bit what we are doing there. Splitting the $[a,b]$ and $[c,d]$ intervals into $n$ subintervals amounts to splitting the original rectangular region into smaller subrectangles. Each such subrectangle has an area of $\Delta A = \Delta x_i \Delta y_j$ where $\Delta x_i = (b-a)/n, \Delta y_j = (d-c)/n$. That area $\Delta A$ gives a base area for a cuboid and multiplying the base area by the height $f(x_i, y_j)$, we obtain a volume of that cuboid. When $n$ grows large, the cuboids look more and more like thin rectangular columns or rods and their summed volume approximates the desired volume closer and closer and approaches the exact volume when $n$ approaches infinity and therefore the rods become infinitesimally thin.

\subsubsection{Evaluation by Iterated Integrals}
To evaluate such a double integral, we work our way from the inside out. First, we evaluate the inner integral treating $y$ as a constant parameter. This is just a regular 1D integral just like the ones we have seen before. The result of the first integration will be a function $f(y)$, i.e. a function that depends only on $y$ and not on $x$ anymore. We have "integrated out" the variable $x$. Second, we perform another 1D integration to evaluate the outer integral with respect to $y$:
\begin{equation}
 \text{Step 1 - Evaluate:}
 \int_a^b f(x,y) \, dx,  \quad
 \text{Step 2 - Evaluate:}
 \int_c^d f(y) \, dy
\end{equation}
So, the evaluation of a single 2D integral has been broken down to the evaluation of two 1D integrals. We have reduced a new operation to things that we already know how to do. In principle, it doesn't matter, which integration we perform first because for continuous functions $f(x,y)$ by Fubini's theorem we will have:
\begin{equation}
 I = \int_c^d \int_a^b f(x,y) \, dx dy = \int_a^b \int_c^d f(x,y) \, dy dx 
\end{equation}
that is: we can switch inner and outer integral, as we see fit - the result will be the same. However, it is not necessarily the case that both ways of evaluating the integral are of similar difficulty. It may be the case that one way is (much) easier than the other.


% https://tutorial.math.lamar.edu/Classes/CalcIII/IteratedIntegrals.aspx

\subsubsection{Handling Non Rectangular Regions}
Now let's see how we can handle regions that are not such nice and simple axis-aligned rectangles. To handle other shapes, we must allow at least some of the integration limits to be functions instead of constants. There are two types of so called \emph{normal domains}: In type 1 normal domains, our region could be bounded left and right by two vertical lines at $x = a$ and $x = b$ as before but now, instead of being bounded at bottom and top by horizontal lines as $y = c$ and $y = d$, it would now be bounded by two functions $y = g(x)$ and $y = h(x)$. For a type 2 normal domain, it's the other way around: the are bounded at bottom at top by horizontal lines at $y = c$ and $y = d$  as before but the left and right boundaries are described by two functions $x = g(y)$ and $x = h(y)$. Assuming that our region is either a type 1 or type 2 normal domain, we can compute the integral as:
\begin{equation}
\text{Type 1: } I = \int_a^b \int_{g(x)}^{h(x)} f(x,y) \, dy dx   \qquad
\text{Type 2: } I = \int_c^d \int_{g(y)}^{h(y)} f(x,y) \, dx dy
\end{equation}
If our region can neither be described as a type 1 or 2 normal domain, it must be dissected into such normal domains and then the integrals have to be computed for each of the subdomains and be added up. Unless your region has a totally crazy shape, it should be fairly straightforward to break down the region into such normal domains and in general, there a mutliple ways to do so. 
% BÃ¤rwolff, pg 575
%If your region is a polygon, it may make sense to break it down into triangles
%....TBC...explain

%-triangles or maybe more generally trapezoids with vertical borders and some slant in the horizontalish borders, i.e. y-limits are p x + q and r x + s - it doesn't really matter, if the left boundary is at the intersection or somewhat right to it
%-polygons

\paragraph{Notations}
The notation we have used so far with the two seperate integration symbols each of which defining its own lower and upper integration limits is often shortened to something like:
\begin{equation}
I = \iint_R f \, dA  \qquad \text{or}  \qquad 
I = \int_R  f \, dA
\end{equation}
where $R$ is the region that we want to integrate over, $d A$ is an infinitesimal area element and $f$ is our function as before but with supressed arguments. In our first case with the rectangular region, we had $R = [a,b] \times [c,d]$ and generally we have $dA = dx dy = dy dx$. When it is clear from the context that we are talking about a double integral, sometimes just one integral symbol is used. This is especially the case when integrals of arbitrary dimensionality are written down. For these, usually just one single integral sign is used and it must be gathered from the context, what dimensionality this integral has.

\subsection{Triple Integrals}
The definition of the triple integral should now be pretty unsurprising. We'll use the abrreviated notation just introduced and define it as:
\begin{equation}
I = \iiint_R f \, dV = \lim_{n \rightarrow \infty} \sum_{k=1}^n \sum_{j=1}^n \sum_{i=1}^n f(x_i, y_j, z_k) \, \Delta x_i \Delta y_j \Delta z_k
\end{equation}
Here, $dV$ is an infinitesimal volume element given by $dV = dx dy dz$ and we could also replace $\Delta x_i \Delta y_j \Delta z_k$ by a $\Delta V$ - a small but non-infinitesimal volume element. Triple integrals can be used to compute the total mass of an object when its density is given by a function $f(x,y,z)$. Its shape must be somehow formulated via the integration limits. In 3D, it may of course be quite a bit more complicated to break the shape down into pieces that are directly integrable but the genral principles remain the same. We would again work our way from the inside out by performing first the innermost integration which integrates out one variable, say $x$, and then we would be left with a double integral of a function $f(y,z)$. For arbitrary regions, the innermost integration boundaries would be defined by two bivariate functions $g(y,z), h(y,z)$ [VERIFY!]
...TBC...

% use [p,q] for the z-interval - explain that f is already taken and e is a special constant

%\subsection{Integrals in Higher Dimensions}


\subsection{The Change of Variables Formula}
% i think, it's called "change of variables" in english literature

\subsubsection{Coordinate Transformations}
% ...maybe we should have a whole section on Coordinate Systems on a higher level?
So far, we assumed that our functions are given in terms of cartesian coordinates such as $x,y,z$. There are situations where it is advantageous to use different coordinate systems. A well chosen coordinate system can simplify problems by exploiting the natural symmetries of a situation. For example, if we need to integrate a function $f(x,y)$ over a circular region centered at the origin, the expressions for the integration boundaries greatly simplify when we use polar coordinates. Maybe the function itself has circular symmetry, i.e. the value depends only on the radius but not on the angle. In such a case, the function is actually just one dimensional if we use polar coordinates. A 1D function is of course simpler than a 2D function. 
...TBC...

\subsubsection{The Formula}
%For simplicity, we will give the formula only for the 2D case

\subsubsection{Common Coordinate Systems}
ToDo: give equations (back-and-forth, if possible) for polar, cyclindrical, spherical systems and their Jacobian determinants
%Leupold Vol2, pg 239 is good for this

\begin{comment}

-Multiple integrals:
-double integrals over:
 -axis-parallel rectangles (simplest case, limits are constants)
 -triangles with two points with same y-coordinate -> y(x) is a linear function
  -can also be done using x(y) - whatever is most convenient
 -general triangles (split into two triangles of the sort above)
 -general polygons (via triangulation)
 -segments of circular annulus -> uses a coordinate transformation to polar coordinates
  -generalization to arbitrary coordinates
-triple integrals over
 -axis parallel cuboids
 -3-simplex (tetrahedron)
 -general polyeders
 -using cyclindrical, spherical and general 3D coordinates
-nD integrals
 
-line integrals (of scalar function),
-line integrals of vector fields (circulation), surface integrals (flux)
-coordinate transformations (polar, cylindricial, spherical, etc. -> jacobian determinant)
 

\end{comment} 